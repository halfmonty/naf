var s;function b(n,e){let o=e.depsTail;if(o!==void 0){let i=o.nextDep;if(i!==void 0&&i.dep===n){e.depsTail=i;return}}let t={dep:n,sub:e,nextDep:void 0,prevDep:o,nextSub:void 0,prevSub:n.subsTail};o!==void 0?o.nextDep=t:e.deps=t,n.subsTail!==void 0?n.subsTail.nextSub=t:n.subs=t,n.subsTail=t,e.depsTail=t}function f(n){let e=n.deps;for(;e!==void 0;){let o=e.nextDep,t=e.dep;e.prevSub!==void 0?e.prevSub.nextSub=e.nextSub:t.subs=e.nextSub,e.nextSub!==void 0?e.nextSub.prevSub=e.prevSub:t.subsTail=e.prevSub,e=o}n.deps=void 0,n.depsTail=void 0}function h(n){let e=n.subs;if(e===void 0)return;let o=new Set;do o.add(e.sub),e=e.nextSub;while(e!==void 0);for(let t of o)t.fn()}function x(n){let e={value:n,subs:void 0,subsTail:void 0};function o(t){return arguments.length>0?(e.value!==t&&(e.value=t,h(e)),t):(s!==void 0&&b(e,s),e.value)}return o}function S(n){let e=!0,o,t={subs:void 0,subsTail:void 0},i={deps:void 0,depsTail:void 0,fn(){e=!0,h(t)}};return function(){if(s!==void 0&&b(t,s),e){let u=s;s=i,f(i);try{o=n()}finally{s=u}e=!1}return o}}function p(n){let e=!1,o={fn:()=>{},deps:void 0,depsTail:void 0},t=()=>{if(e)return;e=!0;let i=s;s=o,f(o);try{n()}finally{s=i,e=!1}};return o.fn=t,t(),()=>f(o)}function y(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function g(n){return n!=null&&typeof n=="object"&&"html"in n&&"mount"in n}function m(n,e){let o=[],t=[n[0]];for(let i=0;i<e.length;i++){let r=e[i];g(r)?(o.push(r),t.push(r.html)):r!=null&&r!==!1&&t.push(String(r)),t.push(n[i+1])}return{html:t.join(""),components:o}}function T(n,e,o){let t={html:n,el:void 0,mount(i){i.innerHTML||(i.innerHTML=n);for(let r of e)r.mount(i);o?.root&&(t.el=i.querySelector(o.root)??void 0),o?.onMount?.(t.el,i)},unmount(){for(let i of e)i.unmount?.();o?.onUnmount?.()}};return t}function v(n,e){let o=crypto.randomUUID(),t,i=`<span data-${n}="${o}"></span>`;return{html:i,mount(r){let u=r.querySelector(`[data-${n}="${o}"]`);if(!u&&(r.innerHTML=i,u=r.querySelector(`[data-${n}="${o}"]`),!u))throw new Error(`Could not find placeholder with data-${n}="${o}"`);t=e(u)},unmount(){t?.()}}}function E(n,...e){if(!Array.isArray(n)&&typeof n=="object"&&!("raw"in n)){let u=n;return(l,...a)=>{let{html:c,components:d}=m(l,a);return T(c,d,u)}}let o=n,t=e,{html:i,components:r}=m(o,t);return T(i,r)}function C(n,e,o){let t;return v("when",i=>{let r=p(()=>{t?.unmount?.(),t=n()?e():o?.(),i.innerHTML=t?.html??"",t?.mount(i)});return()=>{r(),t?.unmount?.()}})}function L(n,e){let o=[];return v("each",t=>{let i=p(()=>{o.forEach(l=>l.unmount?.()),o=[];let u=n().map((l,a)=>{let c=a,d=e(l,()=>c);return o.push(d),d.html}).join("");t.innerHTML=u,o.forEach(l=>l.mount(t))});return()=>{i(),o.forEach(r=>r.unmount?.())}})}function w(n,e,o){return p(()=>{n[e]=o()})}function k(n,e,o){return p(()=>{let t=o();t===null?n.removeAttribute(e):n.setAttribute(e,t)})}function D(n){let{root:e,routes:o,notFound:t}=n,i=null;function r(){i?.unmount?.();let c=window.location.hash||"#/",d=o[c];d?(i=d(),e.innerHTML=i.html,i.mount(e)):t?(i=t(),e.innerHTML=i.html,i.mount(e)):(i=null,e.innerHTML="<h1>Page Not Found</h1>")}function u(c){window.location.hash=c}function l(){return window.location.hash||"#/"}window.addEventListener("hashchange",r),window.addEventListener("load",r),document.readyState==="complete"&&r();function a(){window.removeEventListener("hashchange",r),window.removeEventListener("load",r),i?.unmount?.(),i=null}return{navigate:u,current:l,destroy:a}}export{w as bind,k as bindAttr,S as computed,D as createRouter,L as each,p as effect,x as signal,E as template,y as text,C as when};
