var m,a,T=e=>{m&&(e.add(m),a?.push(e))},h=e=>[...e].forEach(t=>t());function x(e){let t=e,n=new Set;return function(o){return arguments.length>0?(t!==o&&(t=o,h(n)),o):(T(n),t)}}function C(e){let t,n=!0,o=new Set,r=()=>{n=!0,h(o)};return()=>{if(T(o),n){let u=m;m=r,t=e(),m=u,n=!1}return t}}function p(e){let t=!1,n=[],o=()=>{if(t)return;t=!0,n.forEach(l=>l.delete(o)),n.length=0;let r=m,u=a;m=o,a=n,e(),m=r,a=u,t=!1};return o(),()=>{n.forEach(r=>r.delete(o)),n.length=0}}function S(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function v(e){return e!=null&&typeof e=="object"&&"html"in e&&"mount"in e}function d(e,t){let n=[],o=[e[0]];for(let r=0;r<t.length;r++){let u=t[r];v(u)?(n.push(u),o.push(u.html)):u!=null&&u!==!1&&o.push(String(u)),o.push(e[r+1])}return{html:o.join(""),components:n}}function f(e,t,n){let o={html:e,el:void 0,mount(r){r.innerHTML||(r.innerHTML=e);for(let u of t)u.mount(r);n?.root&&(o.el=r.querySelector(n.root)??void 0),n?.onMount?.(o.el,r)},unmount(){for(let r of t)r.unmount?.();n?.onUnmount?.()}};return o}var y=0;function g(e,t){let n=`naf-${y++}`,o,r=`<span data-${e}="${n}"></span>`;return{html:r,mount(u){let l=u.querySelector(`[data-${e}="${n}"]`);if(!l&&(u.innerHTML=r,l=u.querySelector(`[data-${e}="${n}"]`),!l))throw new Error(`Could not find placeholder data-${e}="${n}"`);o=t(l)},unmount(){o?.()}}}function b(e,...t){if(!Array.isArray(e)&&typeof e=="object"&&!("raw"in e)){let l=e;return(i,...c)=>{let{html:s,components:E}=d(i,c);return f(s,E,l)}}let n=e,o=t,{html:r,components:u}=d(n,o);return f(r,u)}function w(e,t,n){let o;return g("when",r=>{let u=p(()=>{o?.unmount?.(),o=e()?t():n?.(),r.innerHTML=o?.html??"",o?.mount(r)});return()=>{u(),o?.unmount?.()}})}function L(e,t){let n=[];return g("each",o=>{let r=p(()=>{n.forEach(i=>i.unmount?.()),n=[];let l=e().map((i,c)=>{let s=t(i,()=>c);return n.push(s),s.html}).join("");o.innerHTML=l,n.forEach(i=>i.mount(o))});return()=>{r(),n.forEach(u=>u.unmount?.())}})}function $(e,t,n){return p(()=>{e[t]=n()})}function A(e,t,n){return p(()=>{let o=n();o===null?e.removeAttribute(t):e.setAttribute(t,o)})}function M(e,t){return e.querySelector(t)}function H(e,t){return e.querySelectorAll(t)}function q(e,t,n,o){let r=e.querySelector(t);return r&&r.addEventListener(n,o),r}function R(e){let{root:t,routes:n,notFound:o}=e,r=null,u=()=>window.location.hash||"#/",l=()=>{r?.unmount?.();let s=n[u()]??o;s?(r=s(),t.innerHTML=r.html,r.mount(t)):(r=null,t.innerHTML="<h1>Page Not Found</h1>")},i=s=>{window.location.hash=s};return window.addEventListener("hashchange",l),window.addEventListener("load",l),document.readyState==="complete"&&l(),{navigate:i,current:u,destroy:()=>{window.removeEventListener("hashchange",l),window.removeEventListener("load",l),r?.unmount?.(),r=null}}}export{M as $,H as $$,q as $on,$ as bind,A as bindAttr,C as computed,R as createRouter,L as each,p as effect,x as signal,b as template,S as text,w as when};
