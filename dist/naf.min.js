var d;function b(t,e){let u=e.depsTail;if(u!==void 0){let n=u.nextDep;if(n!==void 0&&n.dep===t){e.depsTail=n;return}}let o={dep:t,sub:e,nextDep:void 0,prevDep:u,nextSub:void 0,prevSub:t.subsTail};u!==void 0?u.nextDep=o:e.deps=o,t.subsTail!==void 0?t.subsTail.nextSub=o:t.subs=o,t.subsTail=o,e.depsTail=o}function f(t){let e=t.subs;if(e===void 0)return;let u=[],o=new Set;do{let n=e.sub;o.has(n)||(o.add(n),u.push(n)),e=e.nextSub}while(e!==void 0);for(let n of u)n.fn()}function h(t){let e={value:t,subs:void 0,subsTail:void 0,execute(){f(e)}};function u(o){return arguments.length>0?(e.value!==o&&(e.value=o,f(e)),o):(d!==void 0&&b(e,d),e.value)}return u}function S(t){let e=!0,u,o={subs:void 0,subsTail:void 0,execute(){f(o)}},n={deps:void 0,depsTail:void 0,fn(){e=!0,o.execute()}};return function(){if(d!==void 0&&b(o,d),e){let s=d;d=n;let r=n.deps;for(;r!==void 0;){let c=r.nextDep,l=r.dep;r.prevSub!==void 0?r.prevSub.nextSub=r.nextSub:l.subs=r.nextSub,r.nextSub!==void 0?r.nextSub.prevSub=r.prevSub:l.subsTail=r.prevSub,r=c}n.deps=void 0,n.depsTail=void 0;try{u=t()}finally{d=s}e=!1}return u}}function a(t){let e=!1,u={fn:()=>{},deps:void 0,depsTail:void 0},o=()=>{let i=u.deps;for(;i!==void 0;){let s=i.nextDep,r=i.dep;i.prevSub!==void 0?i.prevSub.nextSub=i.nextSub:r.subs=i.nextSub,i.nextSub!==void 0?i.nextSub.prevSub=i.prevSub:r.subsTail=i.prevSub,i=s}u.deps=void 0,u.depsTail=void 0},n=()=>{if(e)return;e=!0;let i=d;d=u,o();try{t()}finally{d=i,e=!1}};return u.fn=n,n(),o}function g(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function x(t){return t!=null&&typeof t=="object"&&"html"in t&&"mount"in t}function m(t,e){let u=[],o=[t[0]];for(let n=0;n<e.length;n++){let i=e[n];x(i)?(u.push(i),o.push(i.html)):i!=null&&i!==!1&&o.push(String(i)),o.push(t[n+1])}return{html:o.join(""),components:u}}function T(t,e,u){let o={html:t,el:void 0,mount(n){n.innerHTML||(n.innerHTML=t);for(let i of e)i.mount(n);u?.root&&(o.el=n.querySelector(u.root)??void 0),u?.onMount?.(o.el,n)},unmount(){for(let n of e)n.unmount?.();u?.onUnmount?.()}};return o}function v(t,e){let u=crypto.randomUUID(),o,n=`<span data-${t}="${u}"></span>`;return{html:n,mount(i){let s=i.querySelector(`[data-${t}="${u}"]`);if(!s&&(i.innerHTML=n,s=i.querySelector(`[data-${t}="${u}"]`),!s))throw new Error(`Could not find placeholder with data-${t}="${u}"`);o=e(s)},unmount(){o?.()}}}function y(t,...e){if(!Array.isArray(t)&&typeof t=="object"&&!("raw"in t)){let s=t;return(r,...c)=>{let{html:l,components:p}=m(r,c);return T(l,p,s)}}let u=t,o=e,{html:n,components:i}=m(u,o);return T(n,i)}function E(t,e,u){let o;return v("when",n=>{let i=a(()=>{o?.unmount?.(),o=t()?e():u?.(),n.innerHTML=o?.html??"",o?.mount(n)});return()=>{i(),o?.unmount?.()}})}function L(t,e){let u=[];return v("each",o=>{let n=a(()=>{u.forEach(r=>r.unmount?.()),u=[];let s=t().map((r,c)=>{let l=c,p=e(r,()=>l);return u.push(p),p.html}).join("");o.innerHTML=s,u.forEach(r=>r.mount(o))});return()=>{n(),u.forEach(i=>i.unmount?.())}})}function C(t,e,u){return a(()=>{t[e]=u()})}function w(t,e,u){return a(()=>{let o=u();o===null?t.removeAttribute(e):t.setAttribute(e,o)})}function k(t){let{root:e,routes:u,notFound:o}=t,n=null;function i(){n?.unmount?.();let l=window.location.hash||"#/",p=u[l];p?(n=p(),e.innerHTML=n.html,n.mount(e)):o?(n=o(),e.innerHTML=n.html,n.mount(e)):(n=null,e.innerHTML="<h1>Page Not Found</h1>")}function s(l){window.location.hash=l}function r(){return window.location.hash||"#/"}window.addEventListener("hashchange",i),window.addEventListener("load",i),document.readyState==="complete"&&i();function c(){window.removeEventListener("hashchange",i),window.removeEventListener("load",i),n?.unmount?.(),n=null}return{navigate:s,current:r,destroy:c}}export{C as bind,w as bindAttr,S as computed,k as createRouter,L as each,a as effect,h as signal,y as template,g as text,E as when};
